{"openapi":"3.1.0","info":{"title":"FastAPI","version":"0.1.0"},"paths":{"/v1/check":{"get":{"summary":"Check","operationId":"check_v1_check_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/v1/user":{"put":{"summary":"Save User Profile","description":"ユーザーデータを保存","operationId":"save_user_profile_v1_user_put","parameters":[{"name":"authorization","in":"header","required":false,"schema":{"type":"string","title":"Authorization"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserSaveRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/StatusResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"get":{"summary":"Get User Profile","description":"ユーザーデータを取得","operationId":"get_user_profile_v1_user_get","parameters":[{"name":"authorization","in":"header","required":false,"schema":{"type":"string","title":"Authorization"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}}},"components":{"schemas":{"Card":{"properties":{"card_id":{"type":"string","title":"Card Id"},"amount":{"type":"integer","title":"Amount"}},"type":"object","required":["card_id","amount"],"title":"Card"},"Deck":{"properties":{"deck_id":{"type":"string","title":"Deck Id"},"name":{"type":"string","title":"Name"},"primary_cards":{"items":{"type":"string"},"type":"array","title":"Primary Cards","default":[]},"secondary_cards":{"items":{"type":"string"},"type":"array","title":"Secondary Cards","default":[]}},"type":"object","required":["deck_id","name"],"title":"Deck","description":"デッキ編成のモデル\n\n制約:\n- primary: 3枚 (固定)\n- support + special: 合計20枚"},"HTTPValidationError":{"properties":{"detail":{"items":{"$ref":"#/components/schemas/ValidationError"},"type":"array","title":"Detail"}},"type":"object","title":"HTTPValidationError"},"StatusResponse":{"properties":{"status":{"type":"string","title":"Status"},"updated_at":{"type":"string","format":"date-time","title":"Updated At"}},"type":"object","required":["status","updated_at"],"title":"StatusResponse","description":"保存成功時などに状態だけを返すシンプルなレスポンス"},"UserGameProfile":{"properties":{"display_name":{"type":"string","title":"Display Name"},"level":{"type":"integer","title":"Level","default":0},"ticket":{"type":"integer","title":"Ticket","default":0},"cards":{"items":{"$ref":"#/components/schemas/Card"},"type":"array","title":"Cards","default":[]},"decks":{"items":{"$ref":"#/components/schemas/Deck"},"type":"array","title":"Decks","default":[]},"current_deck_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Current Deck Id"},"created_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Created At"},"updated_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Updated At"}},"type":"object","required":["display_name"],"title":"UserGameProfile","description":"Unityユーザーのゲームデータ構造(RDS用)\n\nRDS(リレーショナルデータベース)では、検索や集計によく使う項目は「カラム(列)」として定義し、\n中身が変わりやすいデータや複雑なデータは「JSON型」としてまとめて保存するのが定石です。"},"UserResponse":{"properties":{"status":{"type":"string","title":"Status"},"user_id":{"type":"string","title":"User Id"},"profile":{"$ref":"#/components/schemas/UserGameProfile"}},"type":"object","required":["status","user_id","profile"],"title":"UserResponse","description":"ユーザーデータを取得(GET)した時のレスポンス形式"},"UserSaveRequest":{"properties":{"profile":{"$ref":"#/components/schemas/UserGameProfile"}},"type":"object","required":["profile"],"title":"UserSaveRequest","description":"ユーザーデータを保存(PUT)する時のリクエスト形式"},"ValidationError":{"properties":{"loc":{"items":{"anyOf":[{"type":"string"},{"type":"integer"}]},"type":"array","title":"Location"},"msg":{"type":"string","title":"Message"},"type":{"type":"string","title":"Error Type"}},"type":"object","required":["loc","msg","type"],"title":"ValidationError"}}}}